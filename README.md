# edgeFinder
A utility for generating vector paths from free-form selected images.

<img src="/examples/image.png?raw=true" width="350" alt="The vectorized path generated by EdgeFinder">

## License
The tool is governed by the GNU GPL v2.0 license. See [`LICENSE`](LICENSE) for more information.

## Requirements
 - [CMake](https://cmake.org/)
 - [Qt 5 or 6](https://www.qt.io/)
 - C++17, meaning a recent MSVC/GCC/Clang that supports at least C++17
 
## How to use
There are three options that you can play with:
 - `--epsilon 0.01`, the epsilon used in the Ramer-Douglas-Peucker line smoothing algorithm. A bigger value smoothes more.
 - `--areaSizeThreshold 500`, the minimum size of an area in pixel to not have it merged into larger neighbours.
 - `--colourThreshold 64`, the threshold used component-wise on the RGB colour of every pixel in the source image to determine black or white. The rule is: if every RGB component is greather than the threshold, the pixel is white, and black otherwise.

## Usage Example
In the `examples` folder, `composition_colour.jpg` represents a possible starting picture.

<img src="/examples/composition_colour.jpg?raw=true" width="350" alt="Three objects in colour">

The image was free-form selected in a photo editing software to produce `composition_bw.jpg` simply by applying an exposure shift.

<img src="/examples/composition_bw.jpg?raw=true" width="350" alt="Three objects, now almost in black and white">

We can now run the tool on this file:
```
	edgeFinder ../examples/composition_bw.jpg --epsilon 2.0 --areaSizeThreshold 350 --colourThreshold 64
```
This will produce two intermediate output files.
The first is `imageBw.png`, which shows whether the value for `--colourThreshold` was chosen appropriately.

<img src="/examples/imageBw.png?raw=true" width="350" alt="Three objects, now in black and white">

If any pixels were selected incorrectly, either change `--colourThreshold` or re-work your input.
Once you are happy, the file `imageArea.png` shows the segmentation result.

<img src="/examples/imageArea.png?raw=true" width="350" alt="Three objects, now segmented into areas">

If too many small areas (e.g. around hair) appear, lower the `--areaSizeThreshold`.
Finally, `image.svg` contains the generated paths that can be used to laser-cut or further refinement.

<img src="/examples/image.png?raw=true" width="350" alt="Three objects, outlines by a red vector path">

## How to build

On Linux or MacOS, if CMake and Qt are readily available:
```
mkdir build
cd build
cmake ..
make -j4
```

On Windows, edit `CMakeLists.txt` such that `PROJECT_CMAKE_SEARCH_PATH` points to your Qt6 installation.
